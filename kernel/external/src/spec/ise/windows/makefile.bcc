_EIFFEL_ = $(ISE_EIFFEL)
CC = $(_EIFFEL_)\bcc55\bin\bcc32.exe
LIB = $(_EIFFEL_)\bcc55\bin\tlib.exe
PLATFORM=windows
CFLAGS = -c -O2 -I$(_EIFFEL_)\bcc55\include -I$(_EIFFEL_)\studio\spec\$(PLATFORM)\include -I.
OBJ = xs_c_bcc.obj

all: clean xs_c_bcc.lib

.c.obj:
	$(CC) $(CFLAGS) ..\..\C\$< 

xs_c_bcc.lib: $(OBJ) ..\..\C\xs_c.h
                if exist $@ del $@
		$(LIB) $@ +$(OBJ)

xs_c_bcc.obj: ..\..\C\xs_c.c ..\..\C\xs_c.h
	$(CC) $(CFLAGS) -o $@ ..\..\C\xs_c.c

clean:
       if exist *.obj del *.obj
       if exist *.lib del *.lib
