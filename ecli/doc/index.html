<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html><head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.7 [fr] (Win98; I) [Netscape]"><title>ECLI - Eiffel Wrapper for the ISO/CLI DBMS Interface</title>
<meta name="author" content="Paul-G. Crismer">
<meta name="description" content="Documentation index"></head>
<body text="#000000" link="#000099" vlink="#993399" alink="#009900" bgcolor="#ffffcc">

<div align="Center">
<big>
<big>

Eiffel Library to ISO/CLI (Call Level Interface) comptabile DB systems</big></big></div>
<br>
<br>
<blockquote style="margin-top: 0pt; margin-right: 0pt; margin-bottom: 0pt; margin-left: 40px; ">Author : Paul G. Crismer&nbsp;
<pgcrism @attglobal.net>

<br>

License: Released under the Eiffel Forum License<br>
Copyright: 2000 - Paul G. Crismer<BR>

</blockquote>
<br>
<h1>Table of contents
</h1>

<UL>
<LI>Abstract</LI>
<LI><i>Section</i> 0 : Current Status</LI>
<LI><i>Section</i> 1 : Design choices</LI>
<LI><i>Section</i> 2 : Implementation notes</LI>
<LI><i>Section</i> 3 : Architecture Diagram</LI>
</UL>

<h1>
Abstract</h1>

&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; ECLI is an Eiffel wrapper around the X/Open ISO/CLI (Call Level Interface).<br>
This interfaces defines an API to RDBMS drivers, and uses SQL92.<br>
ISO/CLI is also known as ODBC under MS-Windows.&nbsp; This interface has implementations on other platforms.<br>
<br>
ECLI wants to be portable across (1) Platforms, (2) Eiffel Compilers.<br>
<br>
<ol>

  <li>Platform portability : ECLI works on any platform that has an ISO/CLI Implementation.</li>
  <li>Eiffel Compiler Portability : ECLI uses as "standard" Eiffel as possible.<br>
The GOBO Library is used for specific data structures.</li>
</ol>
<br>
Some tricks have been used to be free from the idiosyncrasies of any Eiffel Compiler.<br>
It is a pity that even for basic/kernel classes it seems impossible for compiler vendors/providers to<br>
agree on some standard.

<h1>
Section 0 : Current Status</h1>

<h2>Simple Database access</h2>
<OL>
<LI>Connect/Disconnect to a database.</LI>
<LI>Issue SQL Statements with or without parameters.
<LI>Parameters can be used by name (extension to CLI).</LI>
<LI>Execute in direct or prepared mode.  Prepared mode is <em>more</em> performant for repeated execution of same query with different parameters.</LI>
<LI>Get result set data.</LI>
<LI>Describe result-set (metadata)</LI>
<LI>Describe parameters (metadata)</LI>
</OL>
<h2>Cursor framework and tool</h2>
Class ECLI_CURSOR provides basic cursor mechanisms.
The "Query Assistant" tool generate cursor classes that
<ol> <li>encapsulate the cursor definition (sql query)</li>
<li>provide access to result set data, by name</li>
<li>pass parameters in a natural way</li>
</ol>
"Query Assistant" also checks that the query is executable on your datasource before generating any encapsulating class.
Result and parameters names are "inferred" by asking meta-data about the executed query.
The generated class is thus fully "static", i.e. correct types are used and no meta-data are asked to the datasource, for the best possible performance.<br>
The drawback is that, when the database schema changes, cursor classes may need to be re-generated.
<h2>Supported SQL data types</h2>
For the moment CHAR, VARCHAR, INTEGER, FLOAT, DOUBLE, DATE and TIMESTAMP data are supported.<br>
<br>
If other datatypes are needed, they can easily be supported.  For the moment, CHAR data can be used to map to other types, since databases can convert automatically CHAR values to other SQL data types.
ECLI can be used for common RDBMS access in the current state of development.<br>
<br>
<h2>Portability</h2>
<h3>Compilers</h3>
<UL>
<LI>ISE Eiffel</LI>
<LI>SmallEiffel (tested with se -0.76b3)</LI>
</UL>
<h3>Platforms</h3>
<UL>
<LI> Windows</LI>
<LI> Linux</LI>
</UL>
<br>


<h1>
Section 1 : Design choices</h1>

<h2>
D1. Rationale</h2>

<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; The X/Open Call Level Interface is a standard API for database access.<br>
It is available on various platforms, i.e. Unix, Linux, Win32.&nbsp; This is one of the<br>
only standards that all vendors, including M$, fully support without "modifying" it.</pre>

<h2>
D2. Simplicity</h2>

<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; This Eiffel interface is close to CLI, and hides some implementation details as<br>
well.&nbsp; This is a very simple wrapper.<br>
<br>
The main goal is to give a clear and simple database access for common applications.<br>
Since it is a thin wrapper, performance should be as good as possible.</pre>

<h2>
D3. What it is not</h2>

<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; It is not an OO-to-Relational wrapper framework.&nbsp; This interface can be a component<br>
of such a framework</pre>

<h1>
Section 2 : Implementation notes</h1>

<h2>
I1. Transactions</h2>

<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; CLI allows only one transaction per connection/session.&nbsp; There is no subtransaction<br>
mechanism.</pre>

<h2>
I2. Error diagnostic</h2>

<pre>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Class ECLI_STATUS implements the necessary mechanisms.</pre>

<h2>
I3. Data transfer between Database and Program space</h2>


&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Modules that transfer data between database and program space should know the<br>
database data type and the program data type.&nbsp; That is why data-transfer-values are encapsulated<br>
in the class ECLI_VALUE and its descendants.<br>
Descendant classes map CLI specific database values : CHAR, VARCHAR, INTEGER, ...

<h1>
Section 3 : Architecture Diagram</h1>
<img src="architecture.jpg">


</body>
</html>
